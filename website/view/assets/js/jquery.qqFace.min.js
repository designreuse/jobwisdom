/*! zhifang-web 2016-03-24 */!function(a){a.fn.qqFace=function(b){var c={id:"facebox",path:"face/",assign:"content",tip:"em_"},d=a.extend(c,b),e=a("#"+d.assign),f=d.id,g=d.path,h=d.tip;return e.length<=0?(alert("缺少表情赋值对象。"),!1):(a(this).click(function(b){var c,e;if(a("#"+f).length<=0){c='<div id="'+f+'" style="position:absolute;display:none;z-index:1000;" class="qqFace"><table border="0" cellspacing="0" cellpadding="0"><tr>';for(var i=1;75>=i;i++)e="["+h+i+"]",c+='<td><img src="'+g+i+'.gif" onclick="$(\'#'+d.assign+"').setCaret();$('#"+d.assign+"').insertAtCaret('"+e+"');\" /></td>",i%15==0&&(c+="</tr><tr>");c+="</tr></table></div>"}a(this).parent().append(c);var j=a(this).position(),k=j.top+a(this).outerHeight();a("#"+f).css("top",k),a("#"+f).css("left",j.left),a("#"+f).show(),b.stopPropagation()}),void a(document).click(function(){a("#"+f).hide(),a("#"+f).remove()}))}}(jQuery),jQuery.extend({unselectContents:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}}),jQuery.fn.extend({selectContents:function(){$(this).each(function(a){var b,c,d,e,f=this;(d=f.ownerDocument)&&(e=d.defaultView)&&"undefined"!=typeof e.getSelection&&"undefined"!=typeof d.createRange&&(b=window.getSelection())&&"undefined"!=typeof b.removeAllRanges?(c=d.createRange(),c.selectNode(f),0==a&&b.removeAllRanges(),b.addRange(c)):document.body&&"undefined"!=typeof document.body.createTextRange&&(c=document.body.createTextRange())&&(c.moveToElementText(f),c.select())})},setCaret:function(){if($.browser.msie){var a=function(){var a=$(this).get(0);a.caretPos=document.selection.createRange().duplicate()};$(this).click(a).select(a).keyup(a)}},insertAtCaret:function(a){var b=$(this).get(0);if(document.all&&b.createTextRange&&b.caretPos){var c=b.caretPos;c.text=""==c.text.charAt(c.text.length-1)?a+"":a}else if(b.setSelectionRange){var d=b.selectionStart,e=b.selectionEnd,f=b.value.substring(0,d),g=b.value.substring(e);b.value=f+a+g,b.focus();var h=a.length;b.setSelectionRange(d+h,d+h),b.blur()}else b.value+=a}});