!function(a,b){a.dom=function(c){return"string"!=typeof c?c instanceof Array||c[0]&&c.length?[].slice.call(c):[c]:(a.__create_dom_div__||(a.__create_dom_div__=b.createElement("div")),a.__create_dom_div__.innerHTML=c,[].slice.call(a.__create_dom_div__.childNodes))};var c='<div class="mui-poppicker">		<div class="mui-poppicker-header">			<button class="mui-btn mui-poppicker-btn-cancel">取消</button>			<button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button>			<div class="mui-poppicker-clear"></div>		</div>		<div class="mui-poppicker-body">		</div>	</div>',d='<div class="mui-picker">		<div class="mui-picker-inner">			<div class="mui-pciker-rule mui-pciker-rule-ft"></div>			<ul class="mui-pciker-list">			</ul>			<div class="mui-pciker-rule mui-pciker-rule-bg"></div>		</div>	</div>';a.PopPicker=a.Class.extend({init:function(d){var e=this;e.options=d||{},e.options.buttons=e.options.buttons||["取消","确定"],e.panel=a.dom(c)[0],b.body.appendChild(e.panel),e.ok=e.panel.querySelector(".mui-poppicker-btn-ok"),e.cancel=e.panel.querySelector(".mui-poppicker-btn-cancel"),e.body=e.panel.querySelector(".mui-poppicker-body"),e.mask=a.createMask(),e.cancel.innerText=e.options.buttons[0],e.ok.innerText=e.options.buttons[1],e.cancel.addEventListener("tap",function(a){e.hide()},!1),e.ok.addEventListener("tap",function(a){if(e.callback){var b=e.callback(e.getSelectedItems());b!==!1&&e.hide()}},!1),e.mask[0].addEventListener("tap",function(){e.hide()},!1),e._createPicker(),e.panel.addEventListener("touchstart",function(a){a.preventDefault()},!1),e.panel.addEventListener("touchmove",function(a){a.preventDefault()},!1)},_createPicker:function(){var b=this,c=b.options.layer||1,e=100/c+"%";b.pickers=[];for(var f=1;c>=f;f++){var g=a.dom(d)[0];g.style.width=e,b.body.appendChild(g);var h=a(g).picker();b.pickers.push(h),g.addEventListener("change",function(a){var b=this.nextSibling;if(b&&b.picker){var c=a.detail||{},d=c.item||{};b.picker.setItems(d.children)}},!1)}},setData:function(a){var b=this;a=a||[],b.pickers[0].setItems(a)},getSelectedItems:function(){var a=this,b=[];for(var c in a.pickers){var d=a.pickers[c];b.push(d.getSelectedItem()||{})}return b},show:function(c){var d=this;d.callback=c,d.mask.show(),b.body.classList.add(a.className("poppicker-active-for-page")),d.panel.classList.add(a.className("active")),d.__back=a.back,a.back=function(){d.hide()}},hide:function(){var c=this;c.disposed||(c.panel.classList.remove(a.className("active")),c.mask.close(),b.body.classList.remove(a.className("poppicker-active-for-page")),a.back=c.__back)},dispose:function(){var a=this;a.hide(),setTimeout(function(){a.panel.parentNode.removeChild(a.panel);for(var b in a)a[b]=null,delete a[b];a.disposed=!0},300)}})}(mui,document);